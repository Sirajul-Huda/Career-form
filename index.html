<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Career Form</title>
  <link rel="icon" type="image/x-icon" href="./logo without text 1.svg">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
<body>
	<div class="container-main">
		<div class="career-main">
			<form class="form-career" enctype="multipart/form-data" id="frm1">
				<div class="main-items" data-aos="fade-down">
					<img src="./images/Sirajulhuda English s.png" class="logo-main" alt="">
					<h2 class="team-heading mb-0">Join Our Team</h2>
				</div>
				<div class="form-group">
					<label for="formFile" class="form-label">Upload CV</label>
					<input class="form-control" type="file" id="photo">
				</div>
				<div class="form-group">
					<!-- api handling  -->
					<label for="name" >Select Position</label>
					<select class="form-control"  id="response">
						<option id="loadingg">Loading..</option>
					</select>
				</div>
				<div class="form-group">
          <label for="name">Phone Number</label>
          <input type="number" class="form-control" id="phone" placeholder="enter your phone number" >
        </div>
				<div class="form-group">
          <label for="name">Whatsapp Number</label>
          <input type="number" class="form-control" id="whats_app" placeholder="enter your whatsapp number" >
        </div>
				<div class="form-group">
          <label for="name">Email</label>
          <input type="email" class="form-control" id="email" placeholder="enter your email" >
        </div>
				<div class="form-group">
          <label for="name">Enter your name</label>
          <input type="text" class="form-control" id="name" placeholder="Name" >
        </div>
				<div class="form-group">
          <label for="name">House Name</label>
          <input type="text" class="form-control" id="house_name" placeholder="house name" >
        </div>
				<div class="form-group">
          <label for="name">Place</label>
          <input type="text" class="form-control" id="place" placeholder="place" >
        </div>
				<div class="form-group">
          <label for="name">Post</label>
          <input type="text" class="form-control" id="post" placeholder="post" >
        </div>
				<div class="form-group">
          <label for="name">Pincode</label>
          <input type="text" class="form-control" id="pincode" placeholder="your pincode" >
        </div>
				<div class="form-group">
          <label for="name">Work experience</label>
          <input type="text" class="form-control" id="experience" placeholder="experience">
        </div>
				<div class="submit-button">
					<button type="submit" class="btn btn-submit"  onclick="myFunction()">submit</button>
				</div>
			</form>
		</div>
	</div>

	<script>
		// function myFunction() {

		// 	console.log('hai')
		// 	// Get form data
		// 	var phone = document.getElementById("phone").value;
		// 	var options = document.getElementById("options").value;
		// 	var wats_app = document.getElementById("wats_app").value;
		// 	var email = document.getElementById("email").value;
		// 	var name = document.getElementById("name").value;
		// 	var house_name = document.getElementById("house_name").value;
		// 	var place = document.getElementById("place").value;
		// 	var post = document.getElementById("post").value;
		// 	var pincode = document.getElementById("pincode").value;
		// 	var experience = document.getElementById("experience").value;
		
		// 	// Create data object
		// 	var data = {
		// 		phone: phone,
		// 		options: options,
		// 		wats_app: wats_app,
		// 		email: email,
		// 		name: name,
		// 		house_name: house_name,
		// 		place: place,
		// 		post: post,
		// 		pincode: pincode,
		// 		experience: experience
		// 	};
		
		// // 	// Make POST request
		// // 	fetch('/action_page.php', {
		// // 		method: 'POST',
		// // 		headers: {
		// // 			'Content-Type': 'application/json',
		// // 		},
		// // 		body: JSON.stringify(data),
		// // 	})
		// // 	.then(response => response.json())
		// // 	.then(data => {
		// // 		console.log('Success:', data);
		// // 	})
		// // 	.catch((error) => {
		// // 		console.error('Error:', error);
		// // 	});
		// // }
		// console.log(data)
		// }
			

		document.getElementById('response').addEventListener('click', async () => {
						const responseDiv = document.getElementById('loadingg');

					// Set the default loading option
					// responseDiv.innerHTML = '<option>Loading...</option>';
					
            try {

							// responseDiv.innerHTML = '';
							// 		responseDiv.innerHTML += '';
								
                const response = await fetch('https://127.0.0.1:8000/api/v1/coffee-shop/jobs');
                const data = await response.json();

								const positions = data.data
								console.log(positions.length)

                responseDiv.innerHTML =''; 

								for (let i = 0; i < positions.length; i++) {
									responseDiv.innerHTML += `
											<option >${positions[i]}</option>
									`;
							}
								
								
								// if (data.status ==200){
									
								// }
        // Iterate over the positions and add them as options
							
                
            } catch (error) {
                console.error('Error fetching data:', error);
                const responseDiv = document.getElementById('response');
                responseDiv.innerHTML = 'Error fetching data';
            }
        });

				document.getElementById('frm1').addEventListener('submit', async (event) => {
					event.preventDefault();

            console.log('hai');

						const form = event.target;
    				const formData = new FormData(form)

            // Get form data
            // var phone = document.getElementById("phone").value;
            // var options = document.getElementById("response").value;
            // var wats_app = document.getElementById("wats_app").value;
            // var email = document.getElementById("email").value;
            // var name = document.getElementById("name").value;
            // var house_name = document.getElementById("house_name").value;
            // var place = document.getElementById("place").value;
            // var post = document.getElementById("post").value;
            // var pincode = document.getElementById("pincode").value;
            // var experience = document.getElementById("experience").value;

            // Create data object
            // var data = {
            //     phone: phone,
            //     options: options,
            //     wats_app: wats_app,
            //     email: email,
            //     name: name,
            //     house_name: house_name,
            //     place: place,
            //     post: post,
            //     pincode: pincode,
            //     experience: experience
            // };

            // Make POST request
            // fetch('/action_page.php', {
            //     method: 'POST',
            //     headers: {
            //         'Content-Type': 'application/json',
            //     },
            //     body: formData,
            // })
            // .then(response => response.json())
            // .then(data => {
            //     console.log('Success:', data);
            // })
            // .catch((error) => {
            //     console.error('Error:', error);
            // });

            // console.log(data);
						try {
								const response = await fetch('https://b9bbskx0-8000.inc1.devtunnels.ms/api/v1/coffee-shop/submit-application', {
										method: 'POST',
										body: formData,
								});

								const result = await response.json();
								alert(result.message);
						} catch (error) {
								console.error('Error uploading file:', error);
								alert('Error uploading file');
						}

					})

		</script>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3" crossorigin="anonymous"></script>
</body>
</html>
